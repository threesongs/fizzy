<%= tag.div \
      class: "bar full-width flex flex-column justify-end",
      data: {
        controller: "bar",
        bar_dialog_outlet: "#bar-modal",
        bar_search_url_value: search_path,
        bar_ask_url_value: conversation_path
      } do %>
  <div class="flex justify-center gap" data-bar-target="buttonsContainer">
    <%= tag.button \
          class: "btn btn--plain",
          data: {
            controller: "hotkey",
            action: "
            bar#search
            keydown.meta+k@document->hotkey#click keydown.ctrl+k@document->hotkey#click" } do %>
      <span>Search [<%= hotkey_label(["ctrl", "K"]) %>]</span>
    <% end %>
    <span>or</span>
    <%= tag.button \
          class: "btn btn--plain",
          data: {
            controller: "hotkey",
            action: "
            bar#ask
            keydown.meta+a@document->hotkey#click keydown.ctrl+a@document->hotkey#click" } do %>
      <span>Ask [<%= hotkey_label(["ctrl", "A"]) %>]</span>
    <% end %>
  </div>

  <div data-bar-target="searchInput" hidden>
    <%= render "searches/form", query_terms: "" %>
  </div>

  <div data-bar-target="askInput" hidden>
    <%= render "conversations/composer" %>
  </div>

  <%= tag.dialog \
    id: "bar-modal",
    class: "bar__modal shadow",
    data: {
      controller: "dialog",
      dialog_target: "dialog",
      dialog_modal_value: "false",
      action: "keydown.esc->bar#reset" } do %>
    <%= turbo_frame_tag "bar-content", data: { bar_target: "turboFrame" } %>
  <% end %>
<% end %>
